syntax = "proto3";

package regen.data.v1alpha1;

option go_package = "github.com/regen-network/regen-ledger/x/ecocredit";

service Msg {
    rpc CreateClass(MsgCreateClassRequest) returns (MsgCreateClassResponse);
    rpc CreateBatch(MsgCreateBatchRequest) returns (MsgCreateBatchResponse);
    rpc Send(MsgSendRequest) returns (MsgSendResponse);
    rpc Retire(MsgRetireRequest) returns (MsgRetireResponse);
    rpc SetPrecision(MsgSetPrecisionRequest) returns (MsgSetPrecisionResponse);
}

message MsgCreateClassRequest {
    string designer = 1;
    repeated string issuers = 2;
    bytes metadata = 3;
}

message MsgCreateClassResponse {
    string class_id = 1;
}

message MsgCreateBatchRequest {
    string issuer = 1;
    string class_id = 2;
    repeated BatchIssuance issuance = 3;

    message BatchIssuance {
        string recipient = 1;
        string tradeable_units = 2;
        string retired_units = 3;
    }
}

message MsgCreateBatchResponse {
    string batch_denom = 1;
}

message MsgSendRequest {
    string sender = 1;
    string recipient = 2;
    repeated SendUnits credits = 3;

    message SendUnits {
        string batch_denom = 1;
        string tradeable_units = 2;
        string retired_units = 3;
    }
}

message MsgSendResponse {

}

message MsgRetireRequest {
    string holder = 1;
    repeated RetireUnits credits = 2;

    message RetireUnits {
        string batch_denom = 1;
        string units = 2;
    }
}

message MsgRetireResponse { }

message MsgSetPrecisionRequest {
    string issuer = 1;
    string batch_denom = 2;
    uint32 max_decimal_places = 3;
}

message MsgSetPrecisionResponse { }